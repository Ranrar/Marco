[workspace]
resolver = "2"
members = ["core", "marco", "polo"]

# Shared workspace dependencies
[workspace.dependencies]
# Core parsing and serialization (no UI)
nom = "7.1"                          # Parser combinator library
nom_locate = "4.2"                   # Position tracking for nom parsers
ron = "0.11"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
regex = "1.11"
anyhow = "1.0"
log = "0.4.28"
chrono = { version = "0.4", features = ["serde"] }
tempfile = "3.23.0"
emojis = "0.7.2"
fontconfig = "0.10.0"
dirs = "6.0"
moka = { version = "0.12", features = ["sync"] }  # High-performance caching
unicode-normalization = "0.1.24"                  # Unicode NFC normalization for consistent parsing
syntect = "5.3"                      # Syntax highlighting
syntect-assets = "0.23"              # Syntax highlighting

# UI dependencies (GTK4 ecosystem)
gtk4 = "0.10.1"
glib = "0.21"
gio = "0.21"
sourceview5 = "0.10.0"
webkit6 = "0.5.0"
dark-light = "2.0.0"

# Test dependencies
clap = { version = "4.5", features = ["derive"] }
similar = { version = "2.7", features = ["inline", "unicode"] }
colored = "3.0"
atty = "0.2"
criterion = "0.7"
rand = "0.9"
serial_test = "3.2"

# Profile optimizations
[profile.dev]
opt-level = 0
debug = true
incremental = true
overflow-checks = true
split-debuginfo = 'unpacked'

[profile.release]
opt-level = 3
debug = false
lto = true
codegen-units = 1
